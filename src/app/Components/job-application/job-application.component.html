<div class="job-application-container">
  <h2>Job Application</h2>

  <form (ngSubmit)="onSubmit()" #applicationForm="ngForm">
    <div class="form-layout">
      <!-- Full Name -->
      <div class="form-group">
        <label for="fullName">Full Name <span class="required">*</span></label>
        <input type="text" id="fullName" name="fullName" [(ngModel)]="applicationData.fullName" required
          placeholder="Enter your full name">
      </div>

      <!-- Email -->
      <div class="form-group">
        <label for="email">Email <span class="required">*</span></label>
        <input type="email" id="email" name="email" [(ngModel)]="applicationData.email" required
          placeholder="your.email@example.com">
      </div>

      <!-- Phone -->
      <div class="form-group">
        <label for="phone">Phone <span class="required">*</span></label>
        <input type="tel" id="phone" name="phone" [(ngModel)]="applicationData.phone" required
          placeholder="01312345678">
      </div>

      <!-- Gender -->
      <div class="form-group">
        <label for="gender">Gender</label>
        <select id="gender" name="gender" [(ngModel)]="applicationData.gender">
          <option value="" disabled>Select your gender</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
          <option value="other">Other</option>
        </select>
      </div>

      <!-- Location -->
      <div class="form-group">
        <label for="location">Current Location</label>
        <input type="text" id="location" name="currentLocation" [(ngModel)]="applicationData.currentLocation"
          placeholder="City, Country">
      </div>

      <!-- Education -->
      <div class="form-group">
        <label for="education">Highest Education <span class="required">*</span></label>
        <select id="education" name="educationQualification" [(ngModel)]="applicationData.educationQualification"
          required>
          <option value="" disabled>Select highest qualification</option>
          <option value="HSC">HSC</option>
          <option value="diploma">Diploma</option>
          <option value="bachelors">Bachelor's Degree</option>
          <option value="masters">Master's Degree</option>
          <option value="other">Other</option>
        </select>
      </div>

      <!-- Employment Status -->
      <div class="form-group">
        <label for="employmentStatus">Current Employment Status</label>
        <select id="employmentStatus" name="employmentStatus" [(ngModel)]="applicationData.employmentStatus">
          <option value="" disabled>Select current status</option>
          <option value="employed">Employed</option>
          <option value="unemployed">Unemployed</option>
          <option value="student">Student</option>
          <option value="freelancer">Freelancer</option>
        </select>
      </div>

      <!-- Work Experience -->
      <div class="form-group">
        <label for="experience">Work Experience</label>
        <input type="text" id="experience" name="workExperience" [(ngModel)]="applicationData.workExperience">
      </div>

      <!-- Resume Upload -->
      <div class="form-group">
        <label for="resume">Resume/CV <span class="required">*</span></label>
        <div class="file-upload">
          <input type="file" id="resume" (change)="onFileSelected($event)" accept=".pdf,.doc,.docx">
          <label for="resume" class="file-upload-label">
            <div class="upload-content">
              <span class="upload-icon">+</span>
              <span class="file-hint">
                Drag & drop your resume here or click to browse
                <small>(PDF, DOC, DOCX, max 5MB)</small>
              </span>
              <span class="browse-btn">Browse Files</span>
            </div>
          </label>

          <!-- Display selected file -->
          <div *ngIf="selectedFile" class="custom-file-box">
            <div class="file-info">
              <div class="file-details">
                <div class="file-name">{{ selectedFile.name }}</div>
                <div class="file-size">{{ (selectedFile.size / 1024) | number:'1.0-1' }} KB</div>
              </div>
            </div>
          </div>
          

          <!-- Display error -->
          <div *ngIf="fileError" class="text-danger">
            {{ fileError }}
          </div>

        </div>
      </div>


      <input type="hidden" name="jobId" [value]="position?.id" />
      <input type="hidden" name="jobTitle" [value]="position?.title" />

      <!-- Submit Button -->
      <div class="form-group">
        <button type="submit" class="submit-btn">
          Submit Application
        </button>
      </div>

      <!-- Status Messages -->
      <div class="form-group">
        <div *ngIf="isSuccess" class="success-message">
          <div class="icon">âœ“</div>
          <div>
            <h4>Application Submitted Successfully!</h4>
            <p>Thank you for applying. We'll review your application and get back to you soon.</p>
          </div>
        </div>

        <div *ngIf="errorMessage" class="error-message-container">
          <div class="icon">!</div>
          <p>{{ errorMessage }}</p>
        </div>
      </div>
    </div>
  </form>
</div>